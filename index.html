<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./style.css?v=3.4">
	<script src="https://ssstuart.net/APIs/WWWidget.js"></script>
	<link rel="icon" href="./favicon.ico">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Oswald&family=Press+Start+2P&family=Tektur:wght@700&display=swap" rel="stylesheet">
	
	<title>C'est quoi le jeu ? - Classement</title>
	<meta name="author" content="SSStuart">
    <meta name="description" content="Classement et infos du mini-jeu">

	<meta property="og:description" content="Classement et infos du mini-jeu">
	<meta property="og:title" content="C'est quoi le jeu ?">
	<meta property="og:url" content="https://ssstuart.github.io/C-est-quoi-le-jeu/" />
	<meta property="og:type" content="website"/>
	<meta property="og:image" content="https://ssstuart.github.io/C-est-quoi-le-jeu/favicon.png" />
	<meta name="theme-color" content="#941b0c">
</head>
<body>
	<header>
		<h1>C'est quoi le jeu</h1><img id="logo" src="./favicon.png" alt="icon">
	</header>
	<div id="leaderboard">
		<!-- Contenu dynamique -->
	</div>
	<div id="awardContainer">
		<span id="awardFSClose">Cliquez n'importe o√π pour fermer</span>
		<img id="awardFSImg" src="" alt="">
		<p id="awardFSTitle"></p>
	</div>
	<p id="stats">
		Nombre de jeux total devin√©s : <span id="nbJeuxTotal" class="stats_nb">...</span><br>
		‚Ä¶ non devin√©s : <span class="stats_nb">7</span>
	</p>
	<footer>
		<p id="sponsor">Sponsoris√© par Tristan et BUG-MAN-FR &#128526;</p>
		<p id="updatedDate">Mis √† jour le <span id="dateAuto">...</span></p>
	</footer>
</body>
<script>
	// NOUVEAU PSEUDO DISCORD : migration restante pour : AST -> Introuvable ...
	var tableLeaderboard = 
`18	| tristtann
13	| _loyde18
6	| bosslennygood
5	| ichinose0001
4	| damien0792
4	| ipsut
4	| _mmario
3	| breizhhardware
3	| redpig_72
2	| radly_or_not
2	| ougarix
2	| emma.sch
1	| strike7617
1	| dj_pancho
1	| AST
1	| lysdead
1	| picrouge
1   | fizz1774
1   | jeanmichel_bis
1   | alexlebabtou
0	| rayreth
0	| bugmanfr
-1	| colonelfp14`

	var totalPoints = 0;
	var lineNb = 0;
	listPoints = tableLeaderboard.split("\n");
	listPoints.forEach(ligne => {
		lineNb++;
		asAward = false;
		var points = ligne.split("|")[0].trim();
		var nom = ligne.split("|")[1].trim();

		if(parseInt(points) != NaN)
			totalPoints+= parseInt(points);
		document.getElementById('nbJeuxTotal').innerText = totalPoints;

		const leaderboard_line = document.createElement("div");
		leaderboard_line.classList.add("lb_line");
		leaderboard_line.tabIndex = 0;

		/*   TROPH√âES   */
		
		if (lineNb == 1) {
			addAward("trophyFirst", "Troph√©e : Premi√®re place, GG !", "Troph√©e de la premi√®re place", leaderboard_line);
		}
		if (nom == "rayreth") {
			addAward("trophyBG", "Troph√©e : BG üòé", "Troph√©e pour un BG üòé", leaderboard_line);
		}
		if (nom == "tristtann") {
			addAward("trophyFishy", "Troph√©e : √ßa sent le poisson (1er avril)", "Troph√©e du 1er avril", leaderboard_line);
		}
		if (nom == "tristtann") {
			addAward("trophyRGB", "Troph√©e : un jeu *Hue* en couleur", "Troph√©e du jeu Hue", leaderboard_line);
		}
		if (nom == "tristtann" || nom == "bugmanfr") {
			addAward("trophySponsor", "Troph√©e : Sponsor du jeu", "Troph√©e de sponsor du jeu", leaderboard_line);
		}
		if (nom == "bosslennygood") {
			addAward("trophyNice", "Troph√©e : 69√®me jeu trouv√©", "Troph√©e du 69√®me jeu trouv√©", leaderboard_line);
		}

		const lb_line_pseudo = document.createElement("span");
		lb_line_pseudo.classList.add("pseudo");
		lb_line_pseudo.innerText = nom;

		const lb_line_points = document.createElement("span");
		lb_line_points.classList.add("points");
		lb_line_points.innerText = points;

		leaderboard_line.appendChild(lb_line_pseudo);
		leaderboard_line.appendChild(lb_line_points);

		if (points < 0) {
			leaderboard_line.classList.add("negative");
		}
		document.getElementById("leaderboard").appendChild(leaderboard_line);
	});

	function addAward(fileName, title, alt, container) {
		const award = document.createElement("img");
		award.classList.add("award");

		award.src = "./pictures/" + fileName + ".png";
		award.alt = alt;
		award.title = title;
		award.onclick = function() {
			showAward(award.title, award.src);
		}

		container.appendChild(award);
	}

	function showAward(title, src) {
		document.getElementById("awardFSTitle").innerText = title;
		document.getElementById("awardFSImg").src = src;

		document.getElementById("awardContainer").classList.add("visible");
	}

	document.getElementById("awardContainer").addEventListener("click", function() {
		document.getElementById("awardContainer").classList.add("hide");
		document.getElementById("awardContainer").classList.remove("visible");
		setTimeout(function(){ document.getElementById("awardContainer").classList.remove("hide"); }, 400);
	});

	var lastEditDate = new Date(document.lastModified);
	document.getElementById('dateAuto').innerText = lastEditDate.toLocaleDateString();
</script>
</html>
